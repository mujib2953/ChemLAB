function findVideo(e){var t=0;window.XMLHttpRequest&&(xmlhttp=new XMLHttpRequest),xmlhttp.open("GET","xml/videos.xml",!1),xmlhttp.send(),xmlDoc=xmlhttp.responseXML;var n,i=xmlDoc.getElementsByTagName("VIDEO");for(n=0;i.length>n;n++){var r=i[n].getElementsByTagName("NAME")[0].childNodes[0].nodeValue,o=i[n].getElementsByTagName("FILE")[0].childNodes[0].nodeValue;if(r==e){t="media/videos/"+o,mobile||"iPad"==os||isAndroidTablet?Ti.App.fireEvent("openLink",{url:t,text:findCaption(e)}):(videoCaption.innerHTML=findCaption(e),"Firefox"==browser||"Opera"==browser?video.setAttribute("src",t.replace(/mp4/g,"ogg")):video.setAttribute("src",t),video.style.top="0px",video.style.left="0px",videoCaption.style.bottom="0px",video.style.width=WIDTH+"px",video.style.height=HEIGHT-50+"px",video.play()),reactionVideo=1;break}}if(0==t){var s=findName(e),a="You created "+s+"! ";reactionText=findCaption(e),reactionText&&(a+=reactionText),a=mobile?wrapText(a,WIDTH/13*bubbleScale,dialogFont):wrapText(a,eSize*bubbleScale,dialogFont),displayHint(a,0),helpWindow.waitingForMediaPlaybackToFinish=1}}function findImage(e){var t=0;window.XMLHttpRequest&&(xmlhttp=new XMLHttpRequest),xmlhttp.open("GET","xml/image.xml",!1),xmlhttp.send(),xmlDoc=xmlhttp.responseXML;var n,i=xmlDoc.getElementsByTagName("IMAGE");for(n=0;i.length>n;n++){var r=i[n].getElementsByTagName("NAME")[0].childNodes[0].nodeValue,o=i[n].getElementsByTagName("FILE")[0].childNodes[0].nodeValue;if(r==e)if(t="media/images/"+o,mobile||"iPad"==os||isAndroidTablet)Ti.App.fireEvent("showImage",{image:t,text:findCaption(e)});else{var s=new Image;s.onload=function(){reactionImage=s,reactionText=0,reactionText=findCaption(e),reactionText&&(reactionText=wrapText(reactionText,WIDTH-20,dialogFont)),setTimeout("clearImage()",7e3)},s.src=t}}0==t&&findVideo(e)}function findName(e){window.XMLHttpRequest&&(xmlhttp=new XMLHttpRequest);var t=0;xmlhttp.open("GET","xml/moleculenames.xml",!1),xmlhttp.send(),xmlDoc=xmlhttp.responseXML;var n,i=xmlDoc.getElementsByTagName("MOLECULE");for(n=0;i.length>n;n++){var r=i[n].getElementsByTagName("SYMBOL")[0].childNodes[0].nodeValue,o=i[n].getElementsByTagName("NAME")[0].childNodes[0].nodeValue;e==r&&(t=o)}return 0==t?e:t}function findCaption(e){window.XMLHttpRequest&&(xmlhttp=new XMLHttpRequest),xmlhttp.open("GET","xml/captions.xml",!1),xmlhttp.send(),xmlDoc=xmlhttp.responseXML;var t,n=xmlDoc.getElementsByTagName("TEXT");for(t=0;n.length>t;t++){var i=n[t].getElementsByTagName("NAME")[0].childNodes[0].nodeValue,r=n[t].getElementsByTagName("FILE")[0].childNodes[0].nodeValue;if(i==e)return r}}function findInfo(e){window.XMLHttpRequest&&(xmlhttp=new XMLHttpRequest),xmlhttp.open("GET","xml/info.xml",!1),xmlhttp.send(),xmlDoc=xmlhttp.responseXML;var t,n=xmlDoc.getElementsByTagName("ELEMENT");for(t=0;n.length>t;t++){var i=n[t].getElementsByTagName("NUMBER")[0].childNodes[0].nodeValue,r=n[t].getElementsByTagName("TEXT")[0].childNodes[0].nodeValue;if(i==e)return r}}