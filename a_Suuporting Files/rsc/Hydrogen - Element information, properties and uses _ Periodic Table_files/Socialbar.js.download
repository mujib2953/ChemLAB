
$(document).ready(function () {
    /* Begin Doc Ready */
    var lw = {};
    // The Object
    lw.social_bar = $('#social_bar_container');
    lw.footer_element = $('.footercontainer');
    lw.socialBar_start_posn = lw.prev_bar_scroll = 140;
    lw.prev_scroll = 0;
    lw.socialBar_height = 505;
    lw.infinite_scroll = 1;
    lw.socialBar_end_posn = $(document).height() - lw.footer_element.height() - lw.social_bar.offset().top - lw.socialBar_height + lw.socialBar_start_posn;
    /**********************************************************************/

    /**********************************************************************/

    lw.scroll = function () {


        lw.current_scroll = $(document).scrollTop();

        var t = (Number($(document).height()) - Number($(window).height()) - 100);
        lw.max_scroll = t;

        lw.socialBar_end_posn = $(document).height() - lw.footer_element.height() - lw.social_bar.offset().top - lw.socialBar_height + lw.socialBar_start_posn;


        if (lw.current_scroll <= lw.socialBar_start_posn) {
            //console.log('Reached Max:');
            lw.reset_scroll(0);
            //console.log('1');
        } else if ((lw.current_scroll >= lw.max_scroll) && (!lw.infinite_scroll)) {
            lw.reset_scroll(1);
            //console.log('Reached Max:');
            //console.log('2');
        } else if (((lw.current_scroll > lw.socialBar_start_posn) && (lw.current_scroll < lw.max_scroll)) || (lw.infinite_scroll)) {

            if ((lw.current_scroll >= lw.max_scroll) && (lw.bh <= (lw.socialBar_height + 100))) {

                $("#social_bar_container").stop().dequeue().delay(10).addClass('animated').animate({ top: (lw.footer_element.position().top - lw.socialBar_height - 50) + "px" }, 200, "linear", function () {
                    $(this).removeClass('animated').dequeue();
                });

            } else {

                if (window.location.href.indexOf("periodic-table") > 0) {
                    $("#social_bar_container").stop().dequeue().delay(10).addClass('animated').animate({ top: "140px" }, 200, "linear", function () {
                        $(this).removeClass('animated').dequeue();
                    });
                    return;
                }
                $("#social_bar_container").stop().dequeue().delay(10).addClass('animated').animate({ top: (lw.current_scroll) + "px" }, 200, "linear", function () {
                    $(this).removeClass('animated').dequeue();
                });

            }



        } else {
            // console.log('4');
        }

        // console.log('Min: ' + lw.socialBar_start_posn + ' Current: ' + lw.current_scroll + ' Max:' + lw.max_scroll + 'Infinite Scroll: ' + lw.infinite_scroll);

    }

    /**********************************************************************/

    // Grab the Browser Width.
    lw.browser_width = function () {
        var x = 0;
        if (self.innerHeight) {
            x = self.innerWidth;
        } else if (document.documentElement && document.documentElement.clientHeight) {
            x = document.documentElement.clientWidth;
        } else if (document.body) {
            x = document.body.clientWidth;
        } return x;
    }



    /**********************************************************************/

    // Grab the Browser Height.
    lw.browser_height = function () {
        var y = 0;
        if (self.innerHeight) {
            y = self.innerHeight;
        } else if (document.documentElement && document.documentElement.clientHeight) {
            y = document.documentElement.clientHeight;
        } else if (document.body) {
            y = document.body.clientHeight;
        } return y;
    }



    /**********************************************************************/

    // Reset Vars
    lw.reset_vars = function () {

        lw.bw = lw.browser_width();
        lw.bh = lw.browser_height();
        lw.current_scroll = $(document).scrollTop();

        //console.log($(document).height() + "::" + lw.max_scroll + "::" + lw.socialBar_end_posn);
    }

    /**********************************************************************/

    // Reset Scroll
    lw.reset_scroll = function (e) {

        var p = (e == 0) ? lw.socialBar_start_posn : lw.socialBar_end_posn;
        $("#social_bar_container").stop().dequeue().animate({ 'top': p + 'px' }, 100, 'linear');

    }


    /* Ends Doc Ready */

    /**********************************************************************/

    $(window).load(function () {
        lw.reset_vars();
        lw.scroll();
    });

    /**********************************************************************/

    $(window).resize(function () {
        lw.reset_vars();
        lw.scroll();
    });

    /**********************************************************************/

    $(window).scroll(function () {
        lw.scroll();
    });

    /**********************************************************************/

});

