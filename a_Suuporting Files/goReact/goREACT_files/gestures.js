function checkMenuSelect(e,t){var n,i=!1;for(n=0;menuList.length>n;n++)menuList[n].isActive&&(i=!0),menuList[n].handleMouseDown(e,t);return learn.handleMouseDown(e,t),0==mobile&&(e>androidTabletScaleX(783)&&androidTabletScaleX(814)>e&&t>androidTabletScaleY(33)&&androidTabletScaleY(67)>t&&0!=pTable.drawMode&&pTable.setDrawModeNormal(),e>androidTabletScaleX(835)&&androidTabletScaleX(866)>e&&t>androidTabletScaleY(33)&&androidTabletScaleY(67)>t&&3!=pTable.drawMode&&pTable.setDrawModeAtomic(),e>androidTabletScaleX(887)&&androidTabletScaleX(918)>e&&t>androidTabletScaleY(33)&&androidTabletScaleY(67)>t&&2!=pTable.drawMode&&pTable.setDrawModeIonic(),e>androidTabletScaleX(939)&&androidTabletScaleX(970)>e&&t>androidTabletScaleY(33)&&androidTabletScaleY(67)>t&&1!=pTable.drawMode&&pTable.setDrawModeLewis()),i}function checkRelease(){pTable.handleMouseUp(canX,canY)}function checkSelectElements(){if(highlightedElements&&highlightedElements.length&&highlightedElements.shift(),pTable.handleMouseDown(canX,canY),mobile){for(checkReactions();molecules.length>maximumMoleculesInLab;)molecules.splice(0,molecules.length-maximumMoleculesInLab);updateMoleculeLayout()}}function checkDisplayElements(){for(var e=0;elements.length>e;e++)0==elements[e].dragok&&elements[e].x+eSize*pTable.scale>canX&&canX>elements[e].x&&elements[e].y+eSize*pTable.scale>canY&&canY>elements[e].y&&elementInfo.showElement(elements[e])}function checkSelectMolecules(){var e,t,n=0;for(e=0;molecules.length>e;e++)for(t=0;molecules[e].mElements.length>t;t++)0==molecules[e].mElements[t].dragok&&0==n&&molecules[e].mElements[t].x+10+eSize*(molecules[e].mElements[t].rad/300)>canX&&canX>molecules[e].mElements[t].x-eSize&&molecules[e].mElements[t].y+10+eSize*(molecules[e].mElements[t].rad/300)>canY&&canY>molecules[e].mElements[t].y-eSize&&(molecules[e].mElements[t].pX=molecules[e].mElements[t].x,molecules[e].mElements[t].pY=molecules[e].mElements[t].y,molecules[e].mElements[t].x=canX+2*eSize,molecules[e].mElements[t].y=canY+2*eSize,molecules[e].mElements[t].dragok=!0,n=!0)}function checkMoveElement(){pTable.handleMouseDown(canX,canY)}function checkMoveMolecule(){var e,t;for(e=0;molecules.length>e;e++)for(t=0;molecules[e].mElements.length>t;t++)molecules[e].mElements[t].dragok&&(molecules[e].mElements[t].x=canX,molecules[e].mElements[t].y=canY)}function tabletTap(e){clearWindowFlag=helpWindow.isOpen,canX=e.position[0].x,canY=e.position[0].y,checkDisplayElements(),checkMenuSelect(canX,canY)}function tabletDouble(e){clearWindowFlag=helpWindow.isOpen,canX=e.position[0].x,canY=e.position[0].y,checkDisplayElements()}function tabletDragStart(e){1==helpWindow.isOpen&&helpWindow.close(),canX=e.position.x,canY=e.position.y,checkSelectElements(),checkSelectMolecules(),checkMenuSelect(canX,canY),reactionImage&&clearImage()}function tabletDragging(e){canX=e.position.x,canY=e.position.y,checkMoveMolecule()}function tabletDragEnd(){checkRelease()}function singleTap(e){1==helpWindow.isOpen&&(helpWindow.close(),tendHintQueue(),clearHightlight=!1),canX=e.position[0].x-pTable.offsetX,canY=e.position[0].y-pTable.offsetY,pTable.checkTrash(e.position[0].x,e.position[0].y),pTable.checkDeadZones(e.position[0].x,e.position[0].y),elementInfo.elementToDisplay||nav.handleMouseDown(e.position[0].x,e.position[0].y);var t=checkMenuSelect(canX,canY);1==pTable.trigger||1==nav.trigger?(pTable.trigger=!1,nav.trigger=!1):t||checkDisplayElements(),reactionImage&&clearImage()}function doubleTap(e){1==helpWindow.isOpen&&(helpWindow.close(),tendHintQueue()),canX=e.position[0].x-pTable.offsetX,canY=e.position[0].y-pTable.offsetY,pTable.checkTrash(e.position[0].x,e.position[0].y),pTable.checkDeadZones(e.position[0].x,e.position[0].y),nav.handleMouseDown(e.position[0].x,e.position[0].y),1==pTable.trigger||1==nav.trigger?(pTable.trigger=!1,nav.trigger=!1):(checkSelectElements(),checkMenuSelect(canX,canY)),reactionImage&&clearImage()}function zoom(e){pTable.changeScale(e.scale);var t,n=0;t=e.position[0].x,n=e.position[0].y}function dragStart(){pTable.dragStart=1}function dragEnd(){}function dragging(e){1==helpWindow.isOpen&&(helpWindow.close(),tendHintQueue()),1==pTable.dragStart?(initialX=pTable.offsetX,initialY=pTable.offsetY):(pTable.offsetX=initialX+e.distanceX,pTable.offsetY=initialY+e.distanceY),pTable.offsetX>0&&(pTable.offsetX=0),pTable.offsetY>0&&(pTable.offsetY=0),pTable.offsetX<-1*(pTable.tableWidth*pTable.scale-WIDTH)&&(pTable.offsetX=-1*(pTable.tableWidth*pTable.scale-WIDTH)),pTable.offsetY<-1*(pTable.tableHeight*pTable.scale-HEIGHT)&&(pTable.offsetY=-1*(pTable.tableHeight*pTable.scale-HEIGHT)),mobile&&nav.updateOffset(pTable.offsetX,pTable.offsetY),pTable.dragStart+=1}function touchUp(){1==helpWindow.isOpen&&1==clearWindowFlag&&(helpWindow.close(),tendHintQueue()),mouseIsDown=0,checkRelease(),draw()}function touchDown(e){clearWindowFlag=helpWindow.isOpen,mouseIsDown=1,canX=e.pageX-canvas.offsetLeft,canY=e.pageY-canvas.offsetTop,!clearWindowFlag&&checkSelectElements(),checkSelectMolecules(),checkMenuSelect(canX,canY),touchXY(e),reactionImage&&clearImage()}function touchXY(e){if(!e)var e=event;e.preventDefault(),canX=e.pageX-canvas.offsetLeft,canY=e.pageY-canvas.offsetTop,mouseIsDown&&(checkMoveMolecule(),draw())}function mouseUp(){1==helpWindow.isOpen&&1==clearWindowFlag&&(helpWindow.close(),tendHintQueue()),highlightedElements&&highlightedElements.length&&highlightedElements.shift(),mouseIsDown=0,checkRelease(),draw()}function mouseDown(e){clearWindowFlag=helpWindow.isOpen,mouseIsDown=1,canX=e.pageX-canvas.offsetLeft,canY=e.pageY-canvas.offsetTop,checkSelectElements(),checkSelectMolecules(),checkMenuSelect(canX,canY),reactionImage&&clearImage(),mouseXY(e)}function mouseXY(e){if(!e)var e=event;canX=e.pageX-canvas.offsetLeft,canY=e.pageY-canvas.offsetTop,mouseIsDown&&(checkMoveMolecule(),draw())}var clearWindowFlag=!1,initialX=0,initialY=0;